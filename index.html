<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Créer ma signature – Mobile Club Group</title>

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <style>
    *,body,h1{font-family:"Arial" !important}
    a{text-decoration:none !important}
    input[type=text],input[type=tel]{all:initial;font-family:"Arial";padding:12px;margin:8px 0;border:1px solid rgba(0,0,0,.35);border-radius:.5rem;width:300px;background:#fff}
    #generate-signature{all:initial;font-size:18px;background:#fff95f;border:1px solid #000;padding:12px 24px;border-radius:200px;box-shadow:4px 4px 0 #000;font-weight:900;text-align:center;display:flex;margin:24px auto 0;cursor:pointer}
    .overlay{width:632px;min-height:200px;padding-bottom:70px;border:1px dashed #000;border-radius:30px;margin-top:32px;background:#fff; display:flex; justify-content:center; align-items:center;}
    .msg{font-weight:900;opacity:.2}
    .box button{width:auto;height:40px;background:#7d89ff;color:#fff;border:none;border-radius:8px;padding:0 12px;margin-top:12px;cursor:pointer}
    .copied{background:#17da65 !important}
    .logo-header{display:flex;align-items:center;justify-content:center;}
    .logo-header img{padding:12px}
  </style>
</head>

<body style="display:flex;flex-direction:column;align-items:center;padding-top:50px;background:#fefdf9">
  <div class="logo-header">
    <img style="width:120px" src="https://mobileclub-strapi-production.s3.eu-west-1.amazonaws.com/new_logo_a07090f6ed.png" alt="logo mobile.club"> 
    <img style="width:120px" src="https://mobileclub-strapi-production.s3.eu-west-1.amazonaws.com/cleaq_rouge_948a6f2026.png" alt="logo cleaq"> 
  </div>

  <!-- FORMULAIRE -->
  <form id="signature-form" style="margin:0 auto; margin-top:20px">
    <input placeholder="Prénom"  type="text" id="firstname">
    <input placeholder="Nom"     type="text" id="name"><br>
    <input placeholder="Téléphone" type="text" maxlength="14" id="phone">
    <input placeholder="Job title" type="text" id="position"><br>
    <input placeholder="E-mail"   type="text" id="email" style="width:630.5px"><br>
    <button type="submit" id="generate-signature">Générer la signature</button>
  </form>

  <!-- APERÇU + COPIE -->
  <div id="overlay" class="overlay" style="display:none">
    <h2 class="msg">Ta signature apparaitra ici</h2>
    <div id="signature-output" style="margin-top:30px"><div id="signature-to-copy"></div></div>
  </div>

  <div class="box">
    <button id="copy-btn" style="display:none">Copier ma signature</button>
  </div>

  <!-- SCRIPT -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    const BRAND = {
      logos : [
        {link:'https://mobile.club', src:'https://mobileclub-strapi-production.s3.eu-west-1.amazonaws.com/new_logo_a07090f6ed.png?updated_at=2023-01-10T11:03:22.395Z', alt:'logo-mobile-club', width:80},
        {link:'https://cleaq.com/', src:'https://mobileclub-strapi-production.s3.eu-west-1.amazonaws.com/cleaq_rouge_948a6f2026.png', alt:'logo-cleaq', width:90}
      ],
      socials : [
        {href:'https://www.instagram.com/mobile.club/?hl=fr', src:'https://mobileclub-strapi-production.s3.eu-west-1.amazonaws.com/instagram_2c51f8baeb.png', alt:'Instagram'},
        {href:'https://www.tiktok.com/@mobileclub_',           src:'https://mobileclub-strapi-production.s3.eu-west-1.amazonaws.com/tiktok_f1af048f60.png', alt:'TikTok'},
        {href:'https://fr-fr.facebook.com/joinmobileclub/',    src:'https://mobileclub-strapi-production.s3.eu-west-1.amazonaws.com/facebook_af2d56729a.png', alt:'Facebook'},
        {href:'https://www.linkedin.com/company/wearemobileclub/?originalSubdomain=fr', src:'https://mobileclub-strapi-production.s3.eu-west-1.amazonaws.com/linkedin_4d4e9453a9.png', alt:'LinkedIn'}
      ]
    };

    $("#overlay,#copy-btn").hide();

    $("#generate-signature").on("click", function(e){
      e.preventDefault();

      const first = $("#firstname").val().trim();
      const last  = $("#name").val().trim();
      const phone = $("#phone").val().replace(/(\d{2})(?=\d)/g,"$1 ").trim();
      const job   = $("#position").val().trim();
      const mail  = $("#email").val().trim();

      const fullFirst = first ? first[0].toUpperCase()+first.slice(1) : "";
      const fullLast  = last  ? last [0].toUpperCase()+last .slice(1) : "";

      const phoneHTML = phone ? `<tr><td style="padding:0"><a href="tel:${phone}" style="color:#000;font-size:12px;text-decoration:none">${phone}</a></td></tr>` : "";
      const mailHTML  = mail  ? `<tr><td style="padding:0"><a href="mailto:${mail}" style="color:#000;font-size:12px;text-decoration:none">${mail}</a></td></tr>` : "";
      const jobHTML   = job   ? `<p style="margin:0;color:#000;font-size:14px;line-height:22px">${job}</p>` : "";

      /* Logos empilés CENTRÉS */
      const logosHTML = BRAND.logos.map(l=>`
        <tr>
          <td style="padding-bottom:6px; text-align:center;">
            <a href="${l.link}" target="_blank" style="display:inline-block;">
              <img src="${l.src}" alt="${l.alt}" width="${l.width}" style="display:block;margin:0 auto;max-width:128px;border:0;">
            </a>
          </td>
        </tr>`).join("");

      /* Réseaux sociaux */
      const socialsHTML = BRAND.socials.map(s=>`
        <a href="${s.href}" target="_blank" style="display:inline-block;margin-right:8px;">
          <img alt="${s.alt}" src="${s.src}" width="19" height="19" style="border:0;display:block;">
        </a>`).join("");

      /* Signature finale : gauche logos centrés, droite texte en haut */
      const signature = `
<table style="font-family:Arial;font-size:14px" cellspacing="0" cellpadding="0">
  <tr>
    <!-- colonne logos : text-align center -->
    <td style="vertical-align:top; text-align:center; padding-right:46px;">
      <table cellspacing="0" cellpadding="0" style="margin:0 auto; text-align:center;">
        ${logosHTML}
      </table>
    </td>

    <!-- espace -->
    <td width="0" style="width:0;"></td>

    <!-- colonne infos : align top -->
    <td style="vertical-align:top; padding-left:10px;">
      <h2 style="margin:0;font-size:18px;font-weight:600;color:#000">${fullFirst}&nbsp;${fullLast}</h2>
      ${jobHTML}
      <table style="padding-top:8px;font-family:Arial;font-size:12px" cellspacing="0" cellpadding="0">
        ${phoneHTML}${mailHTML}
        
      </table>
    </td>
  </tr>
</table>`.trim();

      $("#signature-to-copy").html(signature);
      $(".msg").hide();
      $("#overlay,#copy-btn").show();
    });

    /* copy */
    $("#copy-btn").on("click",function(){
      const range=document.createRange();
      range.selectNodeContents(document.getElementById("signature-to-copy"));
      const sel=window.getSelection(); sel.removeAllRanges(); sel.addRange(range);
      document.execCommand("copy"); sel.removeAllRanges();

      $(this).text("Copié !").addClass("copied")
             .delay(2000).queue(function(n){
                $(this).text("Copier ma signature").removeClass("copied"); n();
             });
    });
  </script>
</body>
</html>
